(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{101:function(e,t,a){"use strict";a.r(t);a(70);var n=a(0),r=a.n(n),i=a(44),l=a.n(i),o=a(56),s=a(8),c=a.n(s),u=a(13),h=a(3),p=a(4),d=a(7),m=a(5),b=a(6),f=a(61),v=a(34),y=a(60);var E=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e;return e=this.props.hsize?this.props.hsize:"h4",r.a.createElement("div",null,r.a.createElement(e,null,this.props.title),r.a.createElement("p",null,this.props.desc))}}]),t}(r.a.Component),k=a(31),j=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(){this.props.handleClick&&this.props.handleClick()}},{key:"render",value:function(){var e;return e=this.props.buttonlabel?this.props.buttonlabel:"Submit",this.props.linkto?r.a.createElement("div",null,r.a.createElement("p",null,this.props.desc),r.a.createElement(k.a,{to:this.props.linkto},r.a.createElement("button",{type:"button",onClick:this.handleClick.bind(this),className:"btn btn-primary btn-responsive"},e))):r.a.createElement("div",null,r.a.createElement("p",null,this.props.desc),r.a.createElement("button",{type:"button",onClick:this.handleClick.bind(this),className:"btn btn-primary btn-responsive"},e))}}]),t}(r.a.Component),O=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(E,{title:"About...",desc:"Welcome to the LetsFakeNews 24-hour TV service where we take your fake-news without judgement and display it for the world to see."}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/write",buttonlabel:"Write",desc:"Write fakenews (using your Phone or Desktop)"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/watch",buttonlabel:"Watch",desc:"Watch fakenews in fullscreen (Desktop only)"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/admin",buttonlabel:"Admin",desc:"Administer the fakenews (password required)"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),g=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(E,{title:"Write...",desc:"Pretend you're a journalist with a deadline but no news to report so you're going to fake it! Try to trick the Al-Jazeera news-room into broadcasting your fake story, then wait to see if it appears on the public screen. To ensure the news-room accept your story, be grammatically correct with spelling, capitalisation etc."}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/write/story",buttonlabel:"Start"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),w=a(29),S=a(2),C=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"handleChange",value:function(e){this.props.handleChange(e.target.value)}},{key:"handleSubmit",value:function(){this.props.handleSubmit&&this.props.handleSubmit()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("div",null,r.a.createElement("textarea",{ref:function(e){null!=e&&e.focus()},className:"form-control form-responsive",required:"required",autoFocus:!0,rows:this.props.rows,maxLength:this.props.length,placeholder:"".concat(this.props.length," chars max..."),value:this.props.value,onChange:this.handleChange.bind(this)}),r.a.createElement(j,{linkto:this.props.linkto,buttonlabel:this.props.buttonlabel,handleClick:this.handleSubmit.bind(this)}))))}}]),t}(r.a.Component),x=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).apiCall=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.apiPost=function(){var e=Object(u.a)(c.a.mark(function e(t,n){var r,i,l,o;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.hydrate_Some_StateWithLocalStorage(n),e.next=3,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)});case 3:return i=e.sent,e.next=6,i.text();case 6:for(o in l=e.sent,console.log(l),a.setState(function(){return{redirect:!0}}),n)localStorage.removeItem(n[o]);case 10:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleChange=a.handleChange.bind(Object(S.a)(Object(S.a)(a))),a.apiCall=a.apiCall.bind(Object(S.a)(Object(S.a)(a))),a.apiPost=a.apiPost.bind(Object(S.a)(Object(S.a)(a))),a.state={},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"saveStateToLocalStorage",value:function(){for(var e in this.state)localStorage.setItem(e,JSON.stringify(this.state[e]))}},{key:"hydrate_Some_StateWithLocalStorage",value:function(e){var t={};for(var a in e)if(localStorage.hasOwnProperty(e[a])){var n=JSON.parse(localStorage.getItem(e[a]));t[e[a]]=n}return t}},{key:"hydrateStateWithLocalStorage",value:function(){if(localStorage.hasOwnProperty(this.props.subject)){var e=localStorage.getItem(this.props.subject);try{e=JSON.parse(e),this.setState(Object(w.a)({},this.props.subject,e))}catch(t){this.setState(Object(w.a)({},this.props.subject,e))}}}},{key:"handleChange",value:function(e){this.setState(Object(w.a)({},this.props.subject,e))}},{key:"handleSubmit",value:function(){this.props.stateToSubmit&&(this.saveStateToLocalStorage(),this.apiPost(this.props.apiEndPoint,this.props.stateToSubmit))}},{key:"componentWillMount",value:function(){this.setState(function(){return{redirect:!1}})}},{key:"componentDidMount",value:function(){this.hydrateStateWithLocalStorage(),window.addEventListener("beforeunload",this.saveStateToLocalStorage.bind(this))}},{key:"componentWillUnmount",value:function(){window.removeEventListener("beforeunload",this.saveStateToLocalStorage.bind(this)),this.state.redirect?(localStorage.clear(),this.setState(function(){return{redirect:!1}})):this.saveStateToLocalStorage()}},{key:"loadStateSubject",value:function(e,t){var a;return Object.keys(e).forEach(function(n){n===t&&(a=e[n])}),a}},{key:"render",value:function(){var e=this.loadStateSubject(this.state,this.props.subject);return!0===this.state.redirect?r.a.createElement(y.a,{to:this.props.redirect}):r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(E,{hsize:"h4",title:this.props.title,desc:this.props.desc}),r.a.createElement("hr",null),r.a.createElement(C,{rows:this.props.rows,length:this.props.length,linkto:this.props.linkto,value:e,handleChange:this.handleChange.bind(this),handleSubmit:this.handleSubmit.bind(this)}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),N=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(x,{title:"Write a story...",desc:"Make up a fake-news story",rows:"4",length:"280",subject:"story",linkto:"/write/title"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),_=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(x,{title:"Add a title...",desc:"Give a title to your story",rows:"1",length:"25",subject:"title",apiEndPoint:"/write/news",stateToSubmit:["story","title"],_linkto:"/write/thankyou",redirect:"/write/thankyou"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),P=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(x,{title:"Give your feedback...",desc:"Give us your response to writing & watching fake-news with us",rows:"4",length:"280",subject:"feedback",apiEndPoint:"/write/feedback",stateToSubmit:["feedback"],linkto:"/write/thankyou"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),R=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(E,{title:"Thank you...",desc:"We hope you enjoyed writing & watching fake-news, its so much!"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/write/story",label:"restart",desc:"Write more fake news"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/write/feedback",label:"feedback",desc:"Leave your feedback for the LetsFakeNews team"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),T=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/write",component:g}),r.a.createElement(v.a,{path:"/write/story",component:N}),r.a.createElement(v.a,{path:"/write/title",component:_}),r.a.createElement(v.a,{path:"/write/feedback",component:P}),r.a.createElement(v.a,{path:"/write/thankyou",component:R}),r.a.createElement(y.a,{to:"/write"})))}}]),t}(r.a.Component),L=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(E,{title:"Admin...",desc:"Use the following buttons to administer the databases"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/admin/stories",buttonlabel:"Stories",desc:"Administer stories as they are submitted"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/admin/feedback",buttonlabel:"Feedback",desc:"View feedback from users"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),A=(a(81),function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).apiGet=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=10;break}throw Error(n.message);case 10:return e.abrupt("return",n);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.apiPost=function(){var e=Object(u.a)(c.a.mark(function e(t,a){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,200===n.status){e.next=8;break}throw Error(r.message);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.eventSource=new EventSource("../settings/sse"),a.apiGet=a.apiGet.bind(Object(S.a)(Object(S.a)(a))),a.apiPost=a.apiPost.bind(Object(S.a)(Object(S.a)(a))),a.handleAutolive=a.handleAutolive.bind(Object(S.a)(Object(S.a)(a))),a.handleRefresh=a.handleRefresh.bind(Object(S.a)(Object(S.a)(a))),a.handleClear=a.handleClear.bind(Object(S.a)(Object(S.a)(a))),a.handleRemove=a.handleRemove.bind(Object(S.a)(Object(S.a)(a))),a.handleStorylive=a.handleStorylive.bind(Object(S.a)(Object(S.a)(a))),a.state={stories:[],autolive:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleAutolive",value:function(e){var t=this;this.apiGet(this.props.apiAutolive).then(function(e){return t.setState({autolive:JSON.parse(e.autolive)})}).catch(function(e){return console.log(e)})}},{key:"handleRefresh",value:function(){document.activeElement.blur(),this.apiGet(this.props.apiRefresh).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}},{key:"handleClear",value:function(){var e=this;document.activeElement.blur();var t={subject:this.props.title};this.apiPost(this.props.apiClear,t).then(function(t){return e.setState({stories:t.data})}).catch(function(e){return console.log(e)})}},{key:"handleRemove",value:function(e){var t=this;document.activeElement.blur(),this.apiPost(this.props.apiRemove,e).then(function(e){return t.setState({stories:e.stories})}).catch(function(e){return console.log(e)})}},{key:"handleStorylive",value:function(e){var t=this;this.apiPost(this.props.apiStorylive,e).then(function(e){return t.setState({stories:e.stories})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.eventSource.addEventListener("story",function(t){e.setState({stories:JSON.parse(t.data)})}),this.eventSource.onerror=function(e){console.log("---- ERROR: ",e)},this.apiGet(this.props.apiHello).then(function(t){e.setState({autolive:JSON.parse(t.autolive),stories:t.stories}),console.log(t)}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.eventSource.close()}},{key:"render",value:function(){var e=this,t={backgroundColor:"white"};return r.a.createElement("div",null,r.a.createElement(E,{desc:this.props.desc,title:this.props.title}),r.a.createElement("hr",null),r.a.createElement("table",{className:"table table-bordered",style:t},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"95%"}},"Command"),r.a.createElement("th",{style:{width:"5%"}},"Action"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Set new stories to go live automatically"),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement("input",{type:"checkbox",checked:this.state.autolive,onChange:this.handleAutolive.bind(this),className:"form-check-input show_tip autolive"}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Refresh imagery for all stories"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:this.handleRefresh.bind(this),className:"btn btn-primary show_tip refresh "}))),r.a.createElement("tr",null,r.a.createElement("td",null,"Clear all stories from database"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){window.confirm("Are you sure you wish to delete this item?")?e.handleClear():document.activeElement.blur()},className:"btn btn-danger show_tip clear"}))))),r.a.createElement("hr",null),r.a.createElement("table",{ref:"table_stories",className:"table table-bordered table-hover",style:t},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"#"),r.a.createElement("th",{style:{width:"20%"}},"Title"),r.a.createElement("th",{style:{width:"65%"}},"Story"),r.a.createElement("th",{style:{width:"6%"}},"Delete"),r.a.createElement("th",{style:{width:"4%"}},"Live"))),r.a.createElement("tbody",null,this.state.stories.length>0?this.state.stories.map(function(t,a){return r.a.createElement("tr",{key:a},r.a.createElement("td",{style:{display:"none"}},t._id),r.a.createElement("td",null,a+1),r.a.createElement("td",null,t.title),r.a.createElement("td",null,t.story),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){return e.handleRemove(t)},className:"btn btn-danger show_tip clear"})),r.a.createElement("td",{style:{textAlign:"center"}},r.a.createElement("input",{type:"checkbox",checked:!0===t.storylive,onChange:function(){return e.handleStorylive(t)},className:"form-check-input show_tip autolive"})))}):r.a.createElement("tr",null))),r.a.createElement("hr",null))}}]),t}(r.a.Component)),F=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).apiGet=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.apiPost=function(){var e=Object(u.a)(c.a.mark(function e(t,a){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 2:return n=e.sent,e.next=5,n.json();case 5:if(r=e.sent,200===n.status){e.next=8;break}throw Error(r.message);case 8:return e.abrupt("return",r);case 9:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.apiGet=a.apiGet.bind(Object(S.a)(Object(S.a)(a))),a.apiPost=a.apiPost.bind(Object(S.a)(Object(S.a)(a))),a.handleClear=a.handleClear.bind(Object(S.a)(Object(S.a)(a))),a.state={feedback:[]},a.eventSource=new EventSource("http://localhost:5000/settings/sse"),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleClear",value:function(){var e=this;document.activeElement.blur();var t={subject:this.props.title};this.apiPost(this.props.apiClear,t).then(function(t){return e.setState({feedback:t.data})}).catch(function(e){return console.log(e)})}},{key:"componentDidMount",value:function(){var e=this;this.eventSource.addEventListener("feedback",function(t){return e.setState({feedback:JSON.parse(t.data)})}),this.apiGet(this.props.apiHello).then(function(t){return e.setState({feedback:t.feedback})}).catch(function(e){return console.log(e)})}},{key:"componentWillUnmount",value:function(){this.eventSource.close()}},{key:"render",value:function(){var e=this,t={backgroundColor:"white"};return r.a.createElement("div",null,r.a.createElement(E,{desc:this.props.desc,title:this.props.title}),r.a.createElement("hr",null),r.a.createElement("table",{className:"table table-bordered",style:t},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"95%"}},"Command"),r.a.createElement("th",{style:{width:"5%"}},"Action"))),r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Clear all entries from database"),r.a.createElement("td",null,r.a.createElement("button",{type:"button",onClick:function(){window.confirm("Are you sure you wish to delete this item?")?e.handleClear():document.activeElement.blur()},className:"btn btn-danger show_tip clear"}))))),r.a.createElement("hr",null),r.a.createElement("table",{className:"table table-bordered",style:t},r.a.createElement("thead",{className:"thead-dark"},r.a.createElement("tr",null,r.a.createElement("th",{style:{width:"5%"}},"#"),r.a.createElement("th",{style:{width:"95%"}},"Feedback"))),r.a.createElement("tbody",null,this.state.feedback.length>0?this.state.feedback.map(function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null,t+1),r.a.createElement("td",null,e.feedback))}):r.a.createElement("tr",null))),r.a.createElement("hr",null))}}]),t}(r.a.Component),M=function(e){function t(){var e;return Object(h.a)(this,t),(e=Object(d.a)(this,Object(m.a)(t).call(this))).apiCall=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),e.apiCall=e.apiCall.bind(Object(S.a)(Object(S.a)(e))),e}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"layout"},r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/admin",component:L}),r.a.createElement(v.a,{path:"/admin/feedback",render:function(){return r.a.createElement(F,{title:"Feedback",desc:"Use this page to view user feedback in realtime",apiHello:"/admin/feedback",apiClear:"/admin/clear"})}}),r.a.createElement(v.a,{path:"/admin/stories",render:function(){return r.a.createElement(A,{title:"Stories",desc:"Use this page to moderate fakenews stories in realtime",apiHello:"/admin/stories",apiAutolive:"/admin/stories/autolive",apiRefresh:"/admin/stories/refresh",apiClear:"/admin/clear",apiRemove:"/admin/story/remove",apiStorylive:"/admin/story/storylive"})}}),r.a.createElement(y.a,{to:"/admin"})))}}]),t}(r.a.Component),W=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("section",null,r.a.createElement(E,{title:"Watch...",desc:"Open this link on a desktop browser, set to fullscreen and enjoy the show!"}),r.a.createElement("hr",null),r.a.createElement(j,{linkto:"/watch/display",buttonlabel:"Watch"}),r.a.createElement("hr",null)))}}]),t}(r.a.Component),D=a(62),G=a.n(D),q=function(e,t){return parseFloat((t-e).toFixed(1))},J=function(e,t,a){var n=e.urls,r=[];for(var i in n)r.push(n[i]);for(var l=Math.round(t/r.length),o=[],s=1;s<=r.length;s++)o.push(Math.round(a+l*s));return{urls:r,markers:o}},I=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e))).apiGet=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.apiGet=a.apiGet.bind(Object(S.a)(Object(S.a)(a))),a.handleFullscreen=a.handleFullscreen.bind(Object(S.a)(Object(S.a)(a))),a.onReady=a.onReady.bind(Object(S.a)(Object(S.a)(a))),a.onProgress=a.onProgress.bind(Object(S.a)(Object(S.a)(a))),a.onEnded=a.onEnded.bind(Object(S.a)(Object(S.a)(a))),a.state={mode:"",popupStart:6.2,popupEnd:11.3,imagesStart:17.6,imagesEnd:41.1,title:"",story:"",urls:[],markers:[],url_index:0,popup_title:{display:"none"},image_frame:{display:"none"},image:{display:"none"},scroller:{display:"none"},playing:!1,controls:!1,volume:1,progressInterval:500,url:"https://res.cloudinary.com/hi58qepi6/video/upload/v1548956607/aljazeera-desktop.mp4"},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleFullscreen",value:function(){document.activeElement.blur(),console.log("button fullscreen pressed"),!1===this.state.playing?this.setState({playing:!0}):this.setState({playing:!1});var e=this.container;e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"onReady",value:function(){var e=this;console.log("ready"),this.apiGet("/watch/request_new_story").then(function(t){return e.setState({title:t.data.title.toUpperCase(),story:t.data.story,urls:J(t.data,e.state.image_duration,e.state.imagesStart).urls,markers:J(t.data,e.state.image_duration,e.state.imagesStart).markers})}).then(function(){return console.log(e.state)}).catch(function(e){return console.log(e)})}},{key:"onProgress",value:function(e){var t=e.playedSeconds;t>=this.state.markers[this.state.url_index]&&this.setState({url_index:this.state.url_index+1}),t>=this.state.popupStart&&t<=this.state.popupEnd?this.setState({popup_title:{display:"block"}}):t>=this.state.imagesStart&&t<=this.state.imagesEnd?this.setState({popup_title:{display:"none"},image_frame:{display:"block"},image:{display:"block"},scroller:{display:"block"}}):this.setState({popup_title:{display:"none"},image_frame:{display:"none"},image:{display:"none"},scroller:{display:"none"}})}},{key:"onEnded",value:function(){this.player.seekTo(0)}},{key:"componentWillMount",value:function(){console.log("componentWillMount"),this.setState({popup_duration:q(this.state.popupStart,this.state.popupEnd),image_duration:q(this.state.imagesStart,this.state.imagesEnd)})}},{key:"componentDidMount",value:function(){console.log("componentDidMount")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{id:"button_div"},r.a.createElement("p",null,r.a.createElement("button",{id:"btnFullscreen",onClick:this.handleFullscreen.bind(this),type:"button"},"TOGGLE PLAY/FULLSCREEN"))),r.a.createElement("div",{id:"outerContainer",ref:function(t){e.outerContainer=t},className:"media"},r.a.createElement("div",{id:"videoContainer",ref:function(t){e.container=t},className:"media-player"},r.a.createElement(G.a,{id:"videoPlayer",className:"react-player",volume:this.state.volume,width:"100%",height:"100%",ref:function(t){e.player=t},controls:this.state.controls,progressInterval:this.state.progressInterval,playing:this.state.playing,onReady:this.onReady.bind(this),onProgress:this.onProgress.bind(this),onEnded:this.onEnded.bind(this),url:this.state.url}),r.a.createElement("div",{id:"popup_title",style:this.state.popup_title},r.a.createElement("p",{id:"popup_title_text"},this.state.title)),r.a.createElement("div",{id:"image_frame",style:this.state.image_frame},r.a.createElement("img",{id:"image",alt:"",src:this.state.urls[this.state.url_index],style:this.state.image})),r.a.createElement("div",{id:"scroller",className:"scroll-left",style:this.state.scroller},r.a.createElement("p",{id:"scroller_text"},this.state.story)))))}}]),t}(r.a.Component),U=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).callApi=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"layout"},r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/watch",component:W}),r.a.createElement(v.a,{path:"/watch/display",component:I}),r.a.createElement(y.a,{to:"/watch"})))}}]),t}(r.a.Component),z=a(103),H=a(104),V=a(47),B=function(e){function t(){return Object(h.a)(this,t),Object(d.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.links.map(function(e,t){return r.a.createElement(V.LinkContainer,{activeClassName:"active",key:t,to:"/".concat(e)},r.a.createElement(z.a.Link,null,e))});return r.a.createElement("div",null,r.a.createElement(H.a,{bg:"light",variant:"light",expand:"md"},r.a.createElement(V.LinkContainer,{to:this.props.title},r.a.createElement("a",{className:"navbar-brand",href:"/"},this.props.title)),r.a.createElement(H.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(H.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement(z.a,{className:"ml-auto"},e))))}}]),t}(r.a.Component),Y=function(e){function t(e){var a;return Object(h.a)(this,t),(a=Object(d.a)(this,Object(m.a)(t).call(this,e)))._handleSubmit=function(){var e=Object(u.a)(c.a.mark(function e(t){var n,r;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,fetch("/settings/authenticate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.state)});case 3:return n=e.sent,e.next=6,n.text();case 6:r=e.sent,console.log(r);case 8:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a.state={username:"",password:"",redirectLogin:!1},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.value,n=t.name;this.setState(Object(w.a)({},n,a))}},{key:"handleSubmit",value:function(e){var t=this;e.preventDefault(),fetch("/settings/authenticate",{method:"POST",body:JSON.stringify(this.state),headers:{"Content-Type":"application/json"}}).then(function(e){if(200!==e.status)throw new Error(e.error);t.setState(function(){return{redirectToReferrer:!0}}),console.log("redirectToReferrer",t.state.redirectToReferrer)}).catch(function(e){console.error(e),alert("Error logging in please try again")})}},{key:"componentDidMount",value:function(){console.log("\n"),console.log(this.props),console.log(this.state),console.log("\n")}},{key:"render",value:function(){return!0===this.state.redirectToReferrer?r.a.createElement(y.a,{to:"/admin"}):r.a.createElement("div",null,r.a.createElement(E,{title:"Login...",desc:"Login with your admin credentials."}),r.a.createElement("hr",null),r.a.createElement("form",{onSubmit:this.handleSubmit.bind(this)},r.a.createElement("input",{type:"username",name:"username",placeholder:"Enter username",value:this.state.username,onChange:this.handleChange.bind(this),required:!0}),r.a.createElement("input",{type:"password",name:"password",placeholder:"Enter password",value:this.state.password,onChange:this.handleChange.bind(this),required:!0}),r.a.createElement("input",{type:"submit",value:"Submit"})),r.a.createElement("hr",null))}}]),t}(r.a.Component),K=function(e){function t(){var e,a;Object(h.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(d.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).callApi=function(){var e=Object(u.a)(c.a.mark(function e(t){var a,n;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,200===a.status){e.next=8;break}throw Error(n.message);case 8:return e.abrupt("return",n);case 9:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement(B,{title:"Let's Fake News",links:["home","write","watch","admin"]}),r.a.createElement("br",null),r.a.createElement(f.a,null,r.a.createElement(v.a,{exact:!0,path:"/",component:O}),r.a.createElement(v.a,{path:"/write",component:T}),r.a.createElement(v.a,{path:"/admin",component:(e=M,function(t){function a(){var e;return Object(h.a)(this,a),(e=Object(d.a)(this,Object(m.a)(a).call(this))).state={loading:!0,redirect:!1},e}return Object(b.a)(a,t),Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;fetch("/settings/checkToken").then(function(t){if(200!==t.status)throw new Error(t.error);e.setState({loading:!1})}).catch(function(t){console.error(t),console.log("redirecting"),e.setState({loading:!1,redirect:!0})})}},{key:"render",value:function(){return this.state.loading?null:this.state.redirect?r.a.createElement(y.a,{to:"/login"}):r.a.createElement(r.a.Fragment,null,r.a.createElement(e,this.props))}}]),a}(r.a.Component))}),r.a.createElement(v.a,{path:"/watch",component:U}),r.a.createElement(v.a,{path:"/login",component:Y}),r.a.createElement(y.a,{to:"/"})));var e}}]),t}(r.a.Component);l.a.render(r.a.createElement(function(){return r.a.createElement(o.a,null,r.a.createElement(K,null))},null),document.getElementById("react"))},69:function(e,t,a){e.exports=a(101)},70:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.aae43b02.chunk.js.map